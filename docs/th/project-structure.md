# การตั้งค่าโปรเจกต์และโครงสร้าง

## การตั้งค่า คอมไพเลอร์ TypeScript

ไฟล์การตั้งค่า คอมไพเลอร์ TypeScript คือ `tsconfig.json` ไฟล์นี้ใช้สำหรับกำหนดการตั้งค่าของ คอมไพเลอร์ TypeScript โดย คอมไพเลอร์จะใช้ไฟล์นี้ในการตัดสินใจว่าจะคอมไพล์โปรเจกต์อย่างไร ใช้โหมด `strict` เพื่อเปิดใช้งานตัวเลือกการตรวจสอบชนิดอย่างเข้มงวดทั้งหมด ซึ่งจะช่วยให้คุณจับข้อผิดพลาดได้มากขึ้นในช่วงเวลาคอมไพล์

```json
{
  "compilerOptions": {
    "strict": true
  }
}
```

## โครงสร้างโปรเจกต์

::: warning Disclaimer
การจัดระเบียบโครงสร้างโปรเจกต์และชนิดต่างๆ อาจแตกต่างกันไปขึ้นอยู่กับขนาดและความซับซ้อนของโปรเจกต์ จากประสบการณ์ของผม โครงสร้างดังต่อไปนี้ทำงานได้ดีสำหรับโปรเจกต์ส่วนใหญ่ อย่างไรก็ตาม ความต้องการและบริบทเฉพาะของโปรเจกต์อาจจำเป็นต้องเปลี่ยนแปลงจากแนวปฏิบัติเหล่านี้ ความยืดหยุ่นและการคิดเชิงวิพากษ์เป็นกุญแจสำคัญในการประยุกต์ใช้หลักการเหล่านี้อย่างมีประสิทธิภาพ
:::

### การจัดระเบียบโมดูล

**แนวทางโมดูลาร์**: โดยทั่วไป ผมจะจัดระเบียบโค้ดและชนิดในลักษณะโมดูลาร์ ซึ่งหมายถึงการสร้างโมดูลที่เล็กกว่าและแยกตัวออกจากกัน แทนที่จะมีทุกอย่างอยู่ในไฟล์เดียว ฟังก์ชันหรือคลาสที่ทำงานร่วมกันบ่อยๆ จะถูกวางในโมดูลเดียวกัน

แนวทางนี้สอดคล้องกับหลักการ Single Responsibility Principle (SRP) จากหลักการ SOLID ซึ่งส่งเสริมให้นักพัฒนาจัดโครงสร้างโค้ดให้แต่ละโมดูลหรือไฟล์มีความรับผิดชอบเดียว

### การจัดระเบียบการกำหนดชนิด

**ชนิดภายใน (Inline Types)**: ชนิดที่เฉพาะเจาะจงกับโมดูล (เช่น พารามิเตอร์สำหรับฟังก์ชันหรือคลาส) จะถูกกำหนดไว้ภายในโมดูลนั้น เพื่อให้ชนิดที่เกี่ยวข้องอยู่ใกล้กับโค้ดที่ใช้งาน ซึ่งทำให้โค้ดอ่านง่ายและเข้าใจง่ายขึ้น โดยเฉพาะอย่างยิ่งสำหรับชนิดที่เฉพาะเจาะจงกับโมดูลหนึ่งและไม่ได้ใช้ซ้ำที่อื่น

**ชนิดที่ใช้ร่วมกัน (Shared Types)**: สำหรับชนิดที่ต้องใช้ร่วมกันในหลายๆ คลาส ผมจะสร้างไฟล์แยกต่างหาก โดยปกติจะตั้งชื่อว่า `types.ts` ภายในโมดูลเดียวกัน ไฟล์นี้จะมีอินเตอร์เฟซหรือชนิดยูทิลิตี้ที่ใช้ร่วมกันเฉพาะกับโมดูลนั้น (โดยเฉพาะโดเมน) ซึ่งจะช่วยป้องกันไม่ให้การกำหนดชนิดกระจัดกระจายอยู่ในไฟล์โมดูลหลัก และช่วยให้การจัดระเบียบชนิดที่เกี่ยวข้องง่ายขึ้น

**ชนิดทั่วไป/ทั่วโลก (Common/Global Types)**: นอกจากนี้ยังมีชนิดทั่วไปที่ใช้ในทุกโมดูล เช่น ชนิดยูทิลิตี้ที่ไม่เฉพาะเจาะจงกับตรรกะธุรกิจหรือโมดูลใดๆ ชนิดเหล่านี้จะถูกวางไว้ในไดเร็กทอรีทั่วไป ทำให้สามารถเข้าถึงได้จากทุกส่วนของโปรเจกต์ เพื่อให้แน่ใจว่าชนิดยูทิลิตี้ดังกล่าวสามารถเข้าถึงได้ง่ายและไม่ต้องทำซ้ำ

### ไฟล์ประกาศชนิด (Type Declaration Files)

ผมแนะนำให้หลีกเลี่ยงการใช้ไฟล์ `.d.ts` เว้นแต่จำเป็นจริงๆ เพราะการประกาศทั่วโลกอาจจัดการและบำรุงรักษาได้ยากเมื่อโปรเจกต์เติบโตขึ้น นอกจากนี้ยังอาจทำให้เกิดความคลาดเคลื่อนระหว่างชนิดในช่วงเวลาคอมไพล์และช่วงเวลารันไทม์ ทำให้มีความซับซ้อนมากขึ้น แทนที่จะทำเช่นนั้น ให้กำหนดชนิดภายในโมดูลและใช้เส้นทางนำเข้าหรือการนำเข้าแบบไวลด์การ์ด (`import * as types from ...`) เพื่อจัดการการนำเข้าชนิดอย่างมีประสิทธิภาพ

อย่างไรก็ตาม ไฟล์ `.d.ts` อาจมีประโยชน์มากสำหรับการกำหนดชนิดทั่วโลก โดยเฉพาะเมื่อทำงานกับไลบรารีของบุคคลที่สามหรือเมื่อขยายชนิดที่สร้างขึ้นภายใน การหลีกเลี่ยงไฟล์ `.d.ts` โดยสิ้นเชิงอาจไม่ใช่เรื่องที่เป็นไปได้ในทุกสถานการณ์ สิ่งสำคัญคือต้องสร้างสมดุลการใช้งานของไฟล์เหล่านี้ด้วยการจัดการอย่างรอบคอบเพื่อหลีกเลี่ยงปัญหา

### สรุป

หลักการสำหรับการจัดระเบียบชนิดนั้นคล้ายกับการจัดระเบียบโค้ด JavaScript: แยกตามโดเมน โมดูล และตรรกะธุรกิจ หากคุณใช้เฟรมเวิร์กที่ปลอดภัยต่อชนิด การเขียนการกำหนดชนิดอาจลดลงอย่างมาก เนื่องจากเฟรมเวิร์กเหล่านี้มักจะสรุปชนิดให้อัตโนมัติ ในกรณีเช่นนี้ คุณเพียงแค่ต้องกำหนดอินเตอร์เฟซข้อมูลเพื่อเสริมการสรุปชนิดของเฟรมเวิร์ก

แนวทางนี้ช่วยให้โครงสร้างโปรเจกต์สะอาดและบำรุงรักษาง่ายและขยายตัวได้ดีเมื่อโปรเจกต์เติบโตขึ้น