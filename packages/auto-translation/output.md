# การตั้งค่าและโครงสร้างโปรเจกต์

## การตั้งค่าคอมไพเลอร์ TypeScript

ไฟล์การตั้งค่าคอมไพเลอร์ TypeScript คือ `tsconfig.json` ไฟล์นี้ใช้สำหรับตั้งค่าคอมไพเลอร์ TypeScript คอมไพเลอร์ TypeScript จะใช้ไฟล์นี้เพื่อกำหนดวิธีการคอมไพล์โปรเจกต์ ใช้โหมด `strict` เพื่อเปิดใช้งานตัวเลือกการตรวจสอบชนิดข้อมูลแบบเข้มงวดทั้งหมด ซึ่งจะช่วยให้คุณเจอข้อผิดพลาดมากขึ้นในขณะคอมไพล์

```json
{
  "compilerOptions": {
    "strict": true
  }
}
```

## โครงสร้างโปรเจกต์

::: warning คำชี้แจงที่สำคัญ
การจัดโครงสร้างโปรเจกต์และชนิดข้อมูลอาจแตกต่างกันไปขึ้นอยู่กับขนาดและความซับซ้อนของโปรเจกต์ จากประสบการณ์ของผม การออกแบบโครงสร้างโปรเจกต์ดังต่อไปนี้ทำงานได้ดีสำหรับโปรเจกต์ส่วนใหญ่ อย่างไรก็ตาม ความต้องการและบริบทเฉพาะของโปรเจกต์อาจจำเป็นต้องมีการปรับเปลี่ยนจากแนวปฏิบัติเหล่านี้ ความยืดหยุ่นและการคิดวิเคราะห์เป็นกุญแจสำคัญในการนำหลักการเหล่านี้ไปใช้อย่างมีประสิทธิภาพ
:::

### การจัดการโมดูล

**แนวทางโมดูล (Modular Approach)**: ผมมักจะจัดโค้ดและชนิดข้อมูลในลักษณะโมดูล ซึ่งหมายถึงการสร้างโมดูลขนาดเล็กที่มีความเป็นอิสระแทนที่จะมีทุกอย่างในไฟล์เดียว ฟังก์ชันหรือคลาสที่ทำงานร่วมกันบ่อยๆ จะถูกวางไว้ในโมดูลเดียวกัน

แนวทางนี้สอดคล้องกับหลักการ Single Responsibility Principle (SRP) จากหลักการ SOLID ซึ่งสนับสนุนให้นักพัฒนาจัดโครงสร้างโค้ดของตนให้แต่ละโมดูลหรือไฟล์มีความรับผิดชอบเดียว

### การจัดการการประกาศชนิดข้อมูล

**ชนิดข้อมูลแบบใกล้เคียง (Inline Types)**: ชนิดข้อมูลที่เฉพาะเจาะจงกับโมดูล (เช่น พารามิเตอร์สำหรับฟังก์ชันหรือคลาส) จะถูกประกาศภายในโมดูลนั้นๆ เพื่อให้แน่ใจว่าชนิดข้อมูลที่เกี่ยวข้องอยู่ใกล้กับโค้ดที่ใช้งานพวกมัน เพราะมันทำให้โค้ดอ่านง่ายและเข้าใจง่ายขึ้น ซึ่งมีประโยชน์อย่างยิ่งสำหรับชนิดข้อมูลที่เฉพาะเจาะจงกับโมดูลใดโมดูลหนึ่งและไม่ถูกใช้งานที่อื่น

**ชนิดข้อมูลที่ใช้ร่วมกัน (Shared Types)**: สำหรับชนิดข้อมูลที่ต้องใช้ในหลายคลาส ผมจะสร้างไฟล์แยกต่างหาก โดยปกติจะตั้งชื่อว่า `types.ts` ภายในโมดูลเดียวกัน ไฟล์นี้จะประกอบด้วย interface หรือชนิดข้อมูลยูทิลิตี้ที่ใช้ร่วมกันเฉพาะในโมดูลนั้น (domain strictly) ซึ่งจะช่วยป้องกันไม่ให้การประกาศชนิดข้อมูลทำให้ไฟล์โมดูลหลักรกและทำให้ชนิดข้อมูลที่เกี่ยวข้องถูกจัดระเบียบ

**ชนิดข้อมูลทั่วไป/ใช้ร่วมกันทั้งโปรเจกต์**: มีชนิดข้อมูลทั่วไปที่ใช้ร่วมกันในทุกโมดูล เช่น ชนิดข้อมูลที่เป็น utility ที่ไม่เฉพาะเจาะจงกับ business logic หรือโมดูลใดๆ โดยจะถูกวางไว้ในไดเรกทอรีที่ใช้ร่วมกัน ทำให้สามารถเข้าถึงได้จากทุกส่วนของโปรเจกต์ ซึ่งจะช่วยให้ชนิดข้อมูลเหล่านี้สามารถเข้าถึงได้ง่ายและไม่จำเป็นต้องทำซ้ำ

### ไฟล์การประกาศชนิดข้อมูล

ผมแนะนำให้หลีกเลี่ยงการใช้ไฟล์ `.d.ts` เว้นแต่จำเป็นจริงๆ ควรใช้เท่าที่จำเป็นเท่านั้น เนื่องจากการประกาศสำหรับใช้ร่วมกันทั้งโปรเจกต์อาจจะจัดการและบำรุงรักษาได้ยากเมื่อโปรเจกต์เติบโตขึ้น นอกจากนี้ยังอาจทำให้เกิดความไม่สอดคล้องกันระหว่างชนิดข้อมูลในช่วงคอมไพล์และช่วงรันไทม์ ทำให้เกิดความซับซ้อนมากขึ้น แทนที่จะใช้ไฟล์ `.d.ts` ให้ประกาศชนิดข้อมูลภายในโมดูลและใช้ import paths หรือ wildcard imports (`import * as types from ...`) เพื่อจัดการการนำเข้าชนิดข้อมูลอย่างมีประสิทธิภาพ

อย่างไรก็ตาม ไฟล์ `.d.ts` สามารถมีประโยชน์มากในการประกาศชนิดข้อมูลสำหรับใช้ร่วมกันทั้งโปรเจกต์ โดยเฉพาะเมื่อทำงานกับไลบรารีที่ติดตั้งจากภายนอกหรือเมื่อขยายชนิดข้อมูลที่มีมาให้ใช้งานเริ่มต้น การหลีกเลี่ยงไฟล์ `.d.ts` อย่างสมบูรณ์อาจไม่เป็นไปได้ในทุกสถานการณ์ จึงสำคัญที่จะต้องใช้ด้วยการจัดการอย่างระมัดระวังเพื่อหลีกเลี่ยงปัญหา

### สรุป

หลักการในการจัดการชนิดข้อมูลคล้ายกับการจัดการโค้ด JavaScript: แยกตาม domain, โมดูล, และ business logic หากคุณใช้เฟรมเวิร์กชนิดข้อมูลแบบปลอดภัย ความจำเป็นในการเขียนการประกาศชนิดข้อมูลอาจลดลงอย่างมาก เนื่องจากเฟรมเวิร์กเหล่านี้มักจะคาดเดาชนิดข้อมูลโดยอัตโนมัติ ในกรณีเช่นนี้ คุณเพียงแค่ต้องประกาศ interface ของข้อมูลเพื่อเสริมการคาดเดาชนิดข้อมูลของเฟรมเวิร์ก

วิธีการนี้จะช่วยให้โครงสร้างโปรเจกต์สะอาดและบำรุงรักษาได้ง่าย ซึ่งสามารถขยายตัวได้ดีเมื่อโปรเจกต์เติบโตขึ้น
